<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

    <!-- Configuración del componente servlet -->
    <bean id="servlet" class="org.apache.camel.component.servlet.CamelHttpTransportServlet">
        <property name="servletName" value="CamelServlet"/>
    </bean>

    <bean id="servletRegistration" class="org.springframework.boot.web.servlet.ServletRegistrationBean">
        <constructor-arg>
            <bean class="org.apache.camel.component.servlet.CamelServlet"/>
        </constructor-arg>
        <property name="name" value="CamelServlet"/>
        <property name="urlMappings" value="/rest/*"/>
    </bean>
    <restConfiguration component="servlet">
        <endpointProperty key="cors" value="true"/>
        <endpointProperty key="cors.allowed.origins" value="*"/>
        <endpointProperty key="cors.allowed.methods" value="GET,POST,HEAD,PUT,DELETE,OPTIONS"/>
        <endpointProperty key="cors.allowed.headers" value="*"/>
    </restConfiguration>

    <!-- Aquí puedes definir tus rutas de Camel -->


    <rest path="/usuarios">
        <get uri="/{id}" produces="application/json">
            <description>Obtiene un usuario por su ID</description>
            <param name="id" type="path" description="El ID del usuario a obtener" required="true"/>
            <responseMessage code="200" message="OK"/>
            <responseMessage code="404" message="No encontrado"/>
            <to uri="bean:userService?method=obtenerUsuario(${header.id})"/>
        </get>
    </rest>
    <route>
        <from uri="rest:get:/usuarios"/>
        <to uri="bean:userService?method=obtenerUsuarios"/>
    </route>


</beans>
